<!doctype html>

<html>
<head>
<title>Javascript's Object System</title>
<link rel="stylesheet" type="text/css" href="presentation.css" />
<script src="jquery-1.6.1.min.js" type="text/javascript"></script>
<script src="fathom.js"></script>

<script src="CodeMirror-2.23/lib/codemirror.js"></script>
<link rel="stylesheet" href="CodeMirror-2.23/lib/codemirror.css">
<script src="json2.js"></script>
<script src="CodeMirror-2.23/mode/javascript/javascript.js"></script>
<script src="Class.js"></script>

<script>

var currentStr = "";
function log(str) {
  currentStr += (str + "<br/>");
}

function run(codeEditor, outputDiv, config) {
  currentStr = "";
  div = document.getElementById(outputDiv);
  var code = "";
  if (config.prelude) code = config.prelude;
  code += codeEditor.getValue();
  try {
    eval(code);
  } catch (err) {
    log(err);
  }
  div.innerHTML = currentStr;
}

function clear(outputDiv) {
    div = document.getElementById(outputDiv);
    div.innerHTML = "<br/>";
}

$(document).ready(function(){
  var fathom = new Fathom('#presentation', {
    onActivateSlide: function() {
     var $slide = $(this);
     $slide.find('pre:first').focus();
    },
    displayMode: "single"
	});
});

currEx = 0;
function createEditor(config) {
  currEx += 1;
  var cE = currEx;
  var div = document.getElementById(config.div);
  div.innerHTML = '<div id="ex'+cE+'_code" class="js_code"></div> \
      <input type="button" id="ex'+cE+'_run" value="run!"> \
      <input type="button" id="ex'+cE+'_clear" value="reset"> \
      <div id="ex'+cE+'_result" class="js_result"><br/></div>'
      
    var ex1_editor = CodeMirror(document.getElementById('ex'+cE+'_code'), {
      value: config.value,
      mode:  "javascript",
      lineNumbers: true
    });
    $('#ex'+cE+'_code').bind("keypress", function(e) {
      if (e.keyCode == 18 && e.ctrlKey) {
        run(ex1_editor, 'ex'+cE+'_result', config);
      }
    });
    $('#ex'+cE+'_run').click(function() {
      run(ex1_editor, 'ex'+cE+'_result', config);
    })
    $('#ex'+cE+'_clear').click(function() {
      clear('ex'+cE+'_result');
    })
 
}
</script>
</head>
<body>

<div id="presentation">
	<div class="slide bb">
  		<h1><img src="images/y-u-no.jpg"/></h1>
  		<h2>Objects, Functions and Inheritance...</h2>
	  <div class="centered">

	  </div>
		
		<div class="footer">
			Niels Joubert - <a href="http://github.com/njoubert">@njoubert</a>
		</div>
	</div>
	
	<div class="slide">
		<h1>Javascript</h1>
		<ul>
			<li>Brendan Eich created javascript "within 10 days"...</li>
			<li>"Else something worse than JS would have happened..."</li>
			<li>The big idea: Validate forms on the client.</li>
			<li>Today: The most widely used language in the world*</li>
			<li></li>
		</ul>
		* Totally unsubstantiated claim.
	</div>
	
	<div class="slide">
		<h1>Example Code</h1>	
		<ul>
		  <div id="ex1">
		  </div>
      
		</ul>
    <script>
    createEditor({
      value: "var obj = {}\nlog(typeof obj);\n//log(obj.constructor);\n//log(obj.__proto__);",
      div: "ex1"
    })
	  </script>
	</div>

	<div class="slide">
		<h1>Example Code</h1>	
		  <div id="ex2">
		  </div>
    <script>
    createEditor({
      value: "function helloWorld() {\n  log('Hello World!');\n}\nhelloWorld();",
      div: "ex2"
    })
	  </script>
	</div>

</div>

</body>
</html>
